appId: com.kangfenmao.CherryStudio
productName: Cherry Studio
electronLanguages:
  - zh-CN
  - zh-TW
  - en-US
  - ja # macOS/linux/win
  - ru # macOS/linux/win
  - zh_CN # for macOS
  - zh_TW # for macOS
  - en # for macOS
directories:
  buildResources: build

protocols:
  - name: Cherry Studio
    schemes:
      - cherrystudio
files:
  - '**/*'
  - '!**/{.vscode,.yarn,.yarn-lock,.github,.cursorrules,.prettierrc}'
  - '!electron.vite.config.{js,ts,mjs,cjs}}'
  - '!**/{.eslintignore,.eslintrc.js,.eslintrc.json,.eslintcache,root.eslint.config.js,eslint.config.js,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,eslint.config.mjs,dev-app-update.yml,CHANGELOG.md,README.md}'
  - '!**/{.env,.env.*,.npmrc,pnpm-lock.yaml}'
  - '!**/{tsconfig.json,tsconfig.tsbuildinfo,tsconfig.node.json,tsconfig.web.json}'
  - '!**/{.editorconfig,.jekyll-metadata}'
  - '!src'
  - '!scripts'
  - '!local'
  - '!docs'
  - '!packages'
  - '!.swc'
  - '!.bin'
  - '!._*'
  - '!*.log'
  - '!stats.html'
  - '!*.md'
  - '!**/*.{iml,o,hprof,orig,pyc,pyo,rbc,swp,csproj,sln,xproj}'
  - '!**/*.{map,ts,tsx,jsx,less,scss,sass,css.d.ts,d.cts,d.mts,md,markdown,yaml,yml}'
  - '!**/{test,tests,__tests__,powered-test,coverage}/**'
  - '!**/{example,examples}/**'
  - '!**/*.{spec,test}.{js,jsx,ts,tsx}'
  - '!**/*.min.*.map'
  - '!**/*.d.ts'
  - '!**/dist/es6/**'
  - '!**/dist/demo/**'
  - '!**/amd/**'
  - '!**/{.DS_Store,Thumbs.db,thumbs.db,__pycache__}'
  - '!**/{LICENSE,license,LICENSE.*,*.LICENSE.txt,NOTICE.txt,README.md,readme.md,CHANGELOG.md}'
  - '!node_modules/rollup-plugin-visualizer'
  - '!node_modules/js-tiktoken'
  - '!node_modules/@tavily/core/node_modules/js-tiktoken'
  - '!node_modules/pdf-parse/lib/pdf.js/{v1.9.426,v1.10.88,v2.0.550}'
  - '!node_modules/mammoth/{mammoth.browser.js,mammoth.browser.min.js}'
  - '!node_modules/selection-hook/prebuilds/**/*' # we rebuild .node, don't use prebuilds
  - '!node_modules/selection-hook/node_modules' # we don't need what in the node_modules dir
  - '!node_modules/selection-hook/src' # we don't need source files
  - '!node_modules/tesseract.js-core/{tesseract-core.js,tesseract-core.wasm,tesseract-core.wasm.js}' # we don't need source files
  - '!node_modules/tesseract.js-core/{tesseract-core-lstm.js,tesseract-core-lstm.wasm,tesseract-core-lstm.wasm.js}' # we don't need source files
  - '!node_modules/tesseract.js-core/{tesseract-core-simd-lstm.js,tesseract-core-simd-lstm.wasm,tesseract-core-simd-lstm.wasm.js}' # we don't need source files
  - '!**/*.{h,iobj,ipdb,tlog,recipe,vcxproj,vcxproj.filters,Makefile,*.Makefile}' # filter .node build files
asarUnpack:
  - resources/**
  - '**/*.{metal,exp,lib}'
win:
  executableName: Cherry Studio
  artifactName: ${productName}-${version}-${arch}-setup.${ext}
  target:
    - target: nsis
    - target: portable
  signtoolOptions:
    sign: scripts/win-sign.js
  verifyUpdateCodeSignature: false
nsis:
  artifactName: ${productName}-${version}-${arch}-setup.${ext}
  shortcutName: ${productName}
  uninstallDisplayName: ${productName}
  createDesktopShortcut: always
  allowToChangeInstallationDirectory: true
  oneClick: false
  include: build/nsis-installer.nsh
  buildUniversalInstaller: false
portable:
  artifactName: ${productName}-${version}-${arch}-portable.${ext}
  buildUniversalInstaller: false
mac:
  entitlementsInherit: build/entitlements.mac.plist
  notarize: false
  artifactName: ${productName}-${version}-${arch}.${ext}
  minimumSystemVersion: '20.1.0' # æœ€ä½æ”¯æŒ macOS 11.0
  extendInfo:
    - NSCameraUsageDescription: Application requests access to the device's camera.
    - NSMicrophoneUsageDescription: Application requests access to the device's microphone.
    - NSDocumentsFolderUsageDescription: Application requests access to the user's Documents folder.
    - NSDownloadsFolderUsageDescription: Application requests access to the user's Downloads folder.
  target:
    - target: dmg
    - target: zip
linux:
  artifactName: ${productName}-${version}-${arch}.${ext}
  target:
    - target: AppImage
    - target: deb
    - target: rpm
  maintainer: electronjs.org
  category: Utility
  desktop:
    entry:
      StartupWMClass: CherryStudio
  mimeTypes:
    - x-scheme-handler/cherrystudio
publish:
  provider: generic
  url: https://releases.cherry-ai.com
electronDownload:
  mirror: https://npmmirror.com/mirrors/electron/
afterPack: scripts/after-pack.js
afterSign: scripts/notarize.js
artifactBuildCompleted: scripts/artifact-build-completed.js
releaseInfo:
  releaseNotes: |
    ğŸ‰ æ–°å¢åŠŸèƒ½ï¼š
    - æ–°å¢ ErrorBoundary ç»„ä»¶åŒ…è£¹ mini çª—å£å†…å®¹ï¼Œæå‡é”™è¯¯å¤„ç†èƒ½åŠ›
    - æ–°å¢æ™ºè°±AIæ¨¡å‹æ”¯æŒï¼Œæ‰©å±•AIæä¾›å•†ç”Ÿæ€
    - æ–°å¢ç³»ç»Ÿ OCR åŠŸèƒ½ï¼Œæ”¯æŒ MacOS å’Œ Windows åŸç”Ÿæ–‡å­—è¯†åˆ«
    - æ–°å¢æ–‡ä»¶é¡µé¢æ‰¹é‡åˆ é™¤åŠŸèƒ½ï¼Œæå‡æ–‡ä»¶ç®¡ç†æ•ˆç‡
    - æ–°å¢è¶…é“¾æ¥å·¥å…·æç¤ºåŠŸèƒ½ï¼Œå¢å¼ºç”¨æˆ·ä½“éªŒ
    - æ–°å¢ iframe æˆªå›¾åŠŸèƒ½ï¼Œæ”¯æŒæ›´å¤šå†…å®¹æ•è·åœºæ™¯
    - æ–°å¢æç¤ºå˜é‡æ›¿æ¢åŠŸèƒ½ï¼Œå¢å¼ºç¼–æ’æœåŠ¡èƒ½åŠ›
    - æ–°å¢æ–‡æœ¬å¢é‡ç´¯ç§¯å¯é…ç½®æ”¯æŒï¼Œä¼˜åŒ–æµå¼å“åº”ä½“éªŒ
    - æ–°å¢ AbortController ç®¡ç†åŠŸèƒ½ï¼Œæ”¹è¿›è¯·æ±‚å–æ¶ˆæœºåˆ¶

    ğŸ”§ ä¼˜åŒ–æ”¹è¿›ï¼š
    - é‡æ„ç¿»è¯‘æœåŠ¡æ¶æ„ï¼Œç»Ÿä¸€ä½¿ç”¨æ–°çš„APIæ¥å£
    - é‡æ„è¯­è¨€æ£€æµ‹åŠŸèƒ½ï¼Œä½¿ç”¨é€šç”¨èŠå¤©æ¥å£æ›¿ä»£ä¸“ç”¨æ¥å£
    - é‡æ„ provider æ³¨å†Œå’Œæ¨¡å‹è§£æé€»è¾‘ï¼Œæå‡æ‰©å±•æ€§
    - é‡æ„ fetchChatCompletion å‚æ•°ç±»å‹å®šä¹‰ï¼Œå¢å¼ºç±»å‹å®‰å…¨
    - é‡æ„ provider åˆ—è¡¨å’Œ URL Schema å¼¹çª—ç•Œé¢
    - å¢å¼ºæ¨¡å‹æ¨ç†æ§åˆ¶é€»è¾‘ï¼Œæ”¯æŒæ›´å¤šæä¾›å•†å’Œæ¨¡å‹ç±»å‹
    - ä¼˜åŒ– MCP å·¥å…·å¯è§æ€§æ§åˆ¶ï¼Œæ ¹æ®å·¥å…·çŠ¶æ€åŠ¨æ€æ˜¾ç¤ºçŸ¥è¯†å›¾æ ‡
    - æ”¹è¿›æ—¥å¿—è®°å½•æœºåˆ¶ï¼Œå°† console.log æ›¿æ¢ä¸º logger.debug
    - å‡çº§æ ¸å¿ƒä¾èµ–åŒ…ï¼ˆmermaid, shiki, tanstack ç­‰ï¼‰

    ğŸ› é—®é¢˜ä¿®å¤ï¼š
    - ä¿®å¤ API æ£€æŸ¥æ—¶çš„é”™è¯¯å¤„ç†å’Œå–æ¶ˆé€»è¾‘
    - ä¿®å¤ç¿»è¯‘è¿‡ç¨‹ä¸­ä¸­æ­¢æ§åˆ¶å™¨çš„é”™è¯¯å¤„ç†
    - ä¿®å¤ useAssistant hook å¯¼è‡´å¿«æ·åŠ©æ‰‹æ¸²æŸ“é—®é¢˜
    - ä¿®å¤ MCP æ ‡ç­¾æº¢å‡ºæ˜¾ç¤ºé—®é¢˜
    - ä¿®å¤ç¼ºå¤±çš„æ¨¡å‹å›¾æ ‡æ˜¾ç¤º
    - ä¿®å¤ ImageViewer åŒé‡èœå•é—®é¢˜ï¼Œæ”¹è¿›å›¾æ ‡æ˜¾ç¤º
    - ä¿®å¤ Qwen MT æ¨¡å‹ç¿»è¯‘åŠŸèƒ½
    - ä¿®å¤ Deepin ç³»ç»Ÿä¸ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç»ˆç«¯çš„é—®é¢˜
    - ä¿®å¤å¤‡ä»½/æ¢å¤è¿›åº¦çš„å›½é™…åŒ–æ˜¾ç¤ºé—®é¢˜
    - ä¿®å¤ç›¸å…³ä¾èµ–ç¼ºå¤±é—®é¢˜

    âš¡ æ€§èƒ½æå‡ï¼š
    - ä¼˜åŒ–æ„å»ºé…ç½®ï¼Œæ’é™¤ä¸å¿…è¦çš„ Tesseract.js æ ¸å¿ƒæ–‡ä»¶
    - æå‡ä»£ç ç±»å‹å®šä¹‰å¤ç”¨æ€§ï¼Œå‡å°‘é‡å¤ä»£ç 
    - ä¼˜åŒ– provider é…ç½®æ„å»ºé€»è¾‘ï¼Œæå‡åˆå§‹åŒ–æ€§èƒ½
